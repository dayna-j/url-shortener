<html>

<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="public/main.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
	 crossorigin="anonymous"></script>
	<title></title>
</head>
<body>
  <div id='body-wrapper'>
    <header>
      <div id='iconContainer' class='fa-2x'>
        <i class="fab fa-linkedin"></i>
        <i class="fab fa-github-alt"></i>
        <i class="fab fa-codepen"></i>
        <i class="fas fa-at"></i>
      </div> 
    </header>
	  <div id='form-container'>
			<form method=''>
				<input id='textBox' type='text' placeholder='Enter url to shorten'>
				<button id='submitButton' class='hidden'>Submit</button>
			</form>
		</div>
	</div>
	<footer>
	</footer>
	<script>
	const log = msg => console.log(msg);
  const button = document.getElementById('submitButton');
  const textBox = document.getElementById('textBox');

  textBox.addEventListener("submit", (event)=>{
    button.click();
  });

  button.addEventListener('click', (event) => {
    event.preventDefault();
    if(!textBox.value) {return null;}
    let url = textBox.value;
    let postObj = {
      method: 'post',
      url: url
    }
    $.post('/new/:url', postObj, (data) => {
        log(data);
        textBox.value = data.url;
    }).catch(
        err=>log(err));
  })
	</script>
</body>

</html>